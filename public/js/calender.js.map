{"version":3,"names":[],"mappings":"","sources":["calender.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _modal = require('./modal');\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar calender = (function () {\n  var date = new Date();\n  var month = date.getMonth();\n  var year = date.getFullYear();\n  var head = $('.head-dates');\n  var body = $('.body-dates');\n  var className = 'skavt-circle';\n  var content;\n  var dialog;\n\n  function createHead(year) {\n    var tr = '<tr><td colspan=\"7\">' + year + '</td></tr><tr>';\n    var days = ['N', 'P', 'T', 'S', 'ÄŒ', 'P', 'S'];\n    days.forEach(function (day) {\n      tr += '<td>' + day + '</td>';\n    });\n    tr += '</tr>';\n    return tr;\n  }\n\n  function dates(years, months) {\n    var date = new Date(year, months);\n    var row = new Array(7);\n    var col = [];\n    var i = 0;\n    while (date.getMonth() == months) {\n      if (row[6]) {\n        col[i] = row;\n        i++;\n        row = new Array(7);\n      }\n\n      row[date.getDay()] = date.getDate();\n      date.setDate(date.getDate() + 1);\n    }\n\n    col[4] = row;\n    return col;\n  }\n\n  function createBody(days, ajax) {\n    var tr = '';\n    days.forEach(function (day, index) {\n      tr += '<tr>' + createColumn(day, ajax) + '</td>';\n    });\n    return tr;\n  }\n\n  function createColumn(data, collection) {\n    var concat = '';\n    for (var i = 0; i < 7; i++) {\n      var day = typeof data[i] === 'undefined' ? '' : data[i];\n      var classAdd = addClass(collection, data[i], 'class=\\'' + className + '\\'');\n      var dataId = addClass(collection, data[i], 'data-content=\\'' + data[i] + '\\'');\n      concat += '<td ' + dataId + ' ' + classAdd + '>' + day + '</td>';\n    }\n\n    return concat;\n  }\n\n  function addClass(collection, number, value) {\n    if (collection === undefined) collection = {};\n\n    return collection.indexOf(number) !== -1 ? value : '';\n  }\n\n  function createCalender(days, ajaxData) {\n    //body.empty();\n    head.html(createHead(year));\n    body.html(createBody(days, ajaxData));\n  }\n\n  function addEvents() {\n    body.find('.' + className).on('click', function (e) {\n      var id = $(e.target).data('content');\n      dialog.show(content[id]);\n    });\n  }\n\n  return {\n    init: function init(modal) {\n      var days = dates(year, month);\n      $.get('http://skavti.dev/notification', { year: year, month: month }, function (res) {\n        content = res;\n        createCalender(days, res.dates);\n        dialog = modal;\n        dialog.init();\n        addEvents();\n      });\n    }\n  };\n})();\n\ncalender.init(_modal2['default']);\n\n},{\"./modal\":2}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar modal = (function () {\n  var body = $('body');\n  var $window = $(window);\n  var modal = $('<div>').addClass('modal-skavti').hide().on('click', hideAll);\n  var layer = $('<div/>').css({\n    width: $window.width(),\n    height: $window.height()\n  }).addClass('black-box').hide().on('click', hideAll);\n  function hideAll() {\n    modal.hide();\n    layer.hide();\n  }\n\n  function showModal(data) {\n    layer.show();\n    modal.html(template(data)).show();\n  }\n\n  function template(_ref) {\n    var title = _ref.title;\n    var body = _ref.body;\n\n    return '\\n      <div>\\n        <h1>' + title + '</h1>\\n        <p>' + body + '</p>\\n      </div>';\n  }\n\n  return {\n    init: function init() {\n      body.append(layer);\n      body.append(modal);\n    },\n\n    show: showModal\n  };\n})();\n\nexports['default'] = modal;\nmodule.exports = exports['default'];\n\n},{}]},{},[1]);\n"],"file":"calender.js","sourceRoot":"/source/"}